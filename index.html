<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>2026å¹´2æœˆ24æ—¥ æ±Ÿæµ™æ²ªä»Šæ—¥èˆè®¯</title>
<style>
:root {{
  --bg: #f6f6f7;
  --card: #ffffff;
  --text: #111;
  --sub: #666;
  --line: #ececef;
  --accent: #8a2be2; /* purple like sample */
  --chip: #f3f4f6;
}}
*{{box-sizing:border-box}}
body{{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei","Noto Sans CJK SC",sans-serif;
}}

/* top bar */
.topbar{{
  position:sticky; top:0; z-index:20;
  background:linear-gradient(90deg, rgba(138,43,226,0.85), rgba(160,82,255,0.75));
  padding:10px 12px 12px;
}}
.toprow{{
  display:flex; align-items:center; gap:10px;
}}
.citypill{{
  flex:0 0 auto;
  display:flex; align-items:center; gap:6px;
  color:#fff;
  font-size:15px;
  padding:8px 10px;
  border-radius:999px;
  background:rgba(255,255,255,0.18);
  border:1px solid rgba(255,255,255,0.22);
}}
.citypill span.name{{
  max-width:96px;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  font-weight:600;
}}
.searchwrap{{flex:1 1 auto}}
.searchbox{{
  width:100%;
  display:flex; align-items:center;
  background:rgba(255,255,255,0.92);
  border-radius:999px;
  padding:6px 10px;           /* smaller + normal */
}}
.searchbox input{{
  width:100%;
  border:none; outline:none;
  font-size:14px;
  background:transparent;
}}
.searchbox input::placeholder{{color:#999}}

.container{{padding:10px 10px calc(18px + env(safe-area-inset-bottom))}}

/* cards */
.card{{
  background:var(--card);
  border-radius:16px;
  padding:14px 14px 12px;
  margin:10px 0;
  box-shadow:0 1px 0 rgba(0,0,0,0.04);
}}
.cardtop{{
  display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
}}
.title{{
  font-size:16px;
  font-weight:800;
  line-height:1.25;
}}
.badge{{
  flex:0 0 auto;
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(46, 204, 113, 0.45);
  color:#18a957;
  background:rgba(46, 204, 113, 0.08);
  white-space:nowrap;
}}
.line{{
  margin-top:8px;
  font-size:13px;
  color:var(--sub);
  display:flex; gap:8px; align-items:center;
}}
.dot{{
  width:6px;height:6px;border-radius:50%;
  background:rgba(138,43,226,0.65);
  display:inline-block;
}}
.navrow{{
  margin-top:10px;
  display:flex; justify-content:flex-end;
}}
.navbtn{{
  display:inline-flex; align-items:center; gap:6px;
  padding:10px 12px;
  border-radius:14px;
  text-decoration:none;
  font-size:14px;
  color:#fff;
  background:rgba(138,43,226,0.92);
}}

/* full screen city modal */
.modal{{
  position:fixed; inset:0;
  background:#fff;
  z-index:50;
  display:none;
  flex-direction:column;
}}
.modal.show{{display:flex}}
.modalhead{{
  padding:12px 12px 10px;
  border-bottom:1px solid var(--line);
  background:#fff;
  position:sticky; top:0; z-index:2;
}}
.headrow{{
  display:flex; align-items:center; gap:10px;
}}
.backbtn{{
  border:none;
  background:transparent;
  font-size:16px;
  padding:6px 6px;
}}
.headtitle{{font-size:16px;font-weight:800}}
.citysearch{{
  margin-top:10px;
  width:100%;
  padding:6px 10px;          /* smaller + normal (your request) */
  font-size:14px;
  border-radius:10px;
  border:1px solid var(--line);
  background:#f7f7f8;
  outline:none;
}}
.sectiontitle{{
  padding:12px 12px 8px;
  font-size:13px;
  color:#777;
}}
.hotgrid{{
  padding:0 12px 10px;
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:10px;
}}
@media (min-width:390px){{ .hotgrid{{grid-template-columns:repeat(4,1fr)}} }}
.hotitem{{
  background:var(--chip);
  border:1px solid #eee;
  border-radius:12px;
  padding:10px 8px;
  text-align:center;
  font-size:14px;
}}
.citylist{{
  position:relative;
  flex:1 1 auto;
  overflow:auto;
  padding-bottom:calc(16px + env(safe-area-inset-bottom));
}}
.grouphead{{
  padding:8px 12px;
  font-weight:800;
  border-top:1px solid var(--line);
  border-bottom:1px solid var(--line);
  background:#fff;
  position:sticky; top:0;
}}
.cityitem{{
  padding:12px 12px;
  border-bottom:1px solid #f0f0f1;
  font-size:15px;
}}
.indexbar{{
  position:fixed;
  right:6px;
  top:150px;
  bottom:90px;
  width:20px;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  z-index:60;
  user-select:none;
}}
.indexbar span{{
  font-size:11px;
  color:#888;
  padding:2px 0;
}}
.empty{{
  padding:26px 12px;
  text-align:center;
  color:#888;
}}
</style>
</head>
<body>
  <div class="topbar">
    <div class="toprow">
      <button class="citypill" id="openCity" aria-label="é€‰æ‹©åŸå¸‚">
        <span class="name" id="cityLabel">å—é€š</span><span>â–¾</span>
      </button>
      <div class="searchwrap">
        <div class="searchbox">
          <input id="q" placeholder="è¯·è¾“å…¥å…³é”®å­—æœç´¢" />
        </div>
      </div>
    </div>
  </div>

  <div class="container" id="list"></div>

  <div class="modal" id="cityModal" aria-hidden="true">
    <div class="modalhead">
      <div class="headrow">
        <button class="backbtn" id="closeCity">â†</button>
        <div class="headtitle">é€‰æ‹©åŸå¸‚</div>
      </div>
      <input class="citysearch" id="cityQ" placeholder="è¾“å…¥åŸå¸‚" />
    </div>

    <div class="sectiontitle">çƒ­é—¨åŸå¸‚</div>
    <div class="hotgrid" id="hotGrid"></div>

    <div class="citylist" id="cityList"></div>
  </div>

  <div class="indexbar" id="indexBar"></div>

<script>
const records = [{"city": "å®œå…´", "name": "è“è¿ª", "time": "åˆåœº: 12:30-16:30 \næ™šåœº: 18:30-00:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/7OWtqsUP17r"}, {"city": "å®œå…´", "name": "è“è°ƒ", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/dFKXitv1Vj"}, {"city": "å®œå…´", "name": "æ±‡è¶…èˆå…", "time": "åˆåœº: 12:30-17:00 \næ™šåœº: 18:30-23:30", "dragon": false, "hot": false, "link": "https://surl.amap.com/7BvLnBgiayj"}, {"city": "è‹å·", "name": "ä¸½èŠ±å®«å¤§èˆå…", "time": "13:30-23:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/6Oj59zhG9fSh"}, {"city": "è‹å·", "name": "æ ¼è“ç¾å¤§èˆå…", "time": "09:30-22:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/9vHvb2Qm7jA"}, {"city": "æ±Ÿé˜´", "name": "è¶…çº§çŒ´å­", "time": "åˆåœº: 12:30-17:00 \næ™šåœº: 18:30-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/haHThGB1xf5x"}, {"city": "æ±Ÿé˜´", "name": "åŒ—å›½èŒ¶åº§", "time": "åˆåœº: 12:30-16:30 \næ™šåœº: 18:30-22:30", "dragon": false, "hot": false, "link": "https://surl.amap.com/FZYlmglveVX"}, {"city": "ä¸Šæµ·", "name": "ä¹è½©éŸ³ä¹èŒ¶åº§", "time": "13:00-23:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/9g18GtPW7Em"}, {"city": "ä¸Šæµ·", "name": "è¾‰ç…ŒéŸ³ä¹å§", "time": "13:00-22:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6c2O9m6t1L7"}, {"city": "ä¸Šæµ·", "name": "äºšç”ºæ¹¾æ´»åŠ¨å®¤", "time": "12:00-21:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/4ytlaCMp8cfm"}, {"city": "é•‡æ±Ÿ", "name": "é‡‘æ˜ŸéŸ³ä¹å§", "time": "13:00-18:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/gLE6oMBY8xs"}, {"city": "ä¸¹é˜³", "name": "èŠ­é»äººæ­Œèˆå…", "time": "åˆåœº: 13:00-17:00\næ™šåœº: 18:30-00:30", "dragon": false, "hot": false, "link": "https://surl.amap.com/RIqTB3h4Jf"}, {"city": "ä¸¹é˜³", "name": "é‘«æºæ­Œèˆå…", "time": "åˆåœº: 13:00-17:00\næ™šåœº: 18:30-23:30", "dragon": false, "hot": false, "link": "https://surl.amap.com/r6YBudHR8Xx"}, {"city": "å¥å®¹", "name": "æ¸©æ ¼é…’å§", "time": "19:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/qcH9Wwl1xfO0"}, {"city": "å¥å®¹", "name": "è‰¾èéŸ³ä¹é…’å§", "time": "14:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/r4Jo6xr1p2JQ"}, {"city": "æ‰¬å·", "name": "é“¶æ²³", "time": "13:30-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/FoPia81dcq5"}, {"city": "æ‰¬å·", "name": "æ˜Ÿçœº", "time": "19:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/gyqV7dL26M9"}, {"city": "å—é€š", "name": "ä¸½èæ­Œèˆå…", "time": "13:00-00:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/c3DSCLk1y83g"}, {"city": "å—é€š", "name": "å¯»æ¢¦ç¼˜æ­Œèˆå…", "time": "12:30-00:30", "dragon": false, "hot": true, "link": "https://surl.amap.com/29RgvGI310V"}, {"city": "å—é€š", "name": "æŠ–èˆè·³èˆä¿±ä¹éƒ¨", "time": "12:30-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/Vdu1qB1o5gH"}, {"city": "å—é€š", "name": "å¢ç±³æ¼”è‰ºé…’å§", "time": "12:30-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/r0q597P76E3"}, {"city": "å—é€š", "name": "è‡ªç”±ç©ºé—´èˆå…", "time": "åˆåœº: 13:00-17:00 \næ™šåœº: 19:00-24:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/fm5PpWV1c4NZ"}, {"city": "å—é€š", "name": "è’™çº³æˆˆå¨±ä¹", "time": "13:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/2mZuySB5i0jU"}, {"city": "å—é€š", "name": "æ˜Ÿé¼å¨±ä¹ä¸­å¿ƒ", "time": "13:00-01:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/1mZJgkCN6xV"}, {"city": "å—é€š", "name": "å¯ä¸œé“­é¼é…’å§", "time": "13:00-00:30", "dragon": false, "hot": false, "link": "https://surl.amap.com/3zRI8Vs94Df"}, {"city": "å—é€š", "name": "é€šå·ç›èå—¨å—¨", "time": "13:30-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/VfuIXry6nI"}, {"city": "æ³°å·", "name": "ç®€çˆ±å°é…’é¦†", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/1x9GWuzvJ9kA"}, {"city": "æ³°å·", "name": "å¯»é…’ä½œä¹å°é…’é¦†", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6uAEygW19glv"}, {"city": "ç›åŸ", "name": "è“å ¡é…’å§", "time": "18:30-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6aXuti2E152r5"}, {"city": "ç›åŸ", "name": "æ˜ŸèŠ±æ­Œèˆå…", "time": "18:00-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6ud3Rui63m"}, {"city": "å˜‰å…´", "name": "å¿ƒæ‚¦", "time": "12:00-00:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/3JIUU4tR1q0A1"}, {"city": "å˜‰å…´", "name": "æƒ…æµ“", "time": "åˆåœº: 12:00-17:00 \næ™šåœº: 18:00-23:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/3J1m6aCvKgWr"}, {"city": "å˜‰å…´", "name": "è²è“‰", "time": "12:00-02:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/3JvWj2tlf1cM"}, {"city": "å˜‰å…´", "name": "ç´«èèˆå…", "time": "åˆåœº: 12:00-17:00 \næ™šåœº: 18:00-23:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/3JHcw7t9k2Ig"}, {"city": "æ¡ä¹¡", "name": "æ¢¦å¯è¿ª", "time": "åˆåœº: 12:00-16:30 \næ™šåœº: 18:00-23:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6QzfcfOQ1oaPR"}, {"city": "æ¡ä¹¡", "name": "çº¢å®çŸ³", "time": "åˆåœº: 12:00-17:00 \næ™šåœº: 18:00-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/6QSfUd9Gkcdf"}, {"city": "æ¡ä¹¡", "name": "é“¶æ²³æ­Œèˆå…", "time": "13:30-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/XcCt5U1h5Gi"}, {"city": "æµ·ç›", "name": "å¤œè‰²", "time": "15:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/7QQqNjEQblA"}, {"city": "æ­å·", "name": "å¡˜æœé…’è‚†Â·éŸ³ä¹å§", "time": "12:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/9y1HxSF3ts"}, {"city": "æ­å·", "name": "å‰‘é½¿è™é…’å§", "time": "15:00-03:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/1oTmjdz1jddD"}, {"city": "æ­å·", "name": "æ–°é‘«é£Ÿè’²(å¥½ä¹…ä¸è§)", "time": "13:00-01:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/3gy21RI91ncLO"}, {"city": "æ­å·", "name": "ä¸ƒäº”èˆå…", "time": "14:00-01:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/5yl0tNMh7sT"}, {"city": "æ­å·", "name": "å³è¥¿èŒ¶å§", "time": "14:00-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/t659rXjp1it"}, {"city": "æ­å·", "name": "è“æ³¢æ¹¾éŸ³ä¹é…’å§", "time": "14:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/btcQhRQ1q9o5"}, {"city": "æ­å·", "name": "è“ç‰å¨±ä¹ä¼š", "time": "14:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/3mncJ6iJOaTH"}, {"city": "æ­å·", "name": "ä¸´å®‰é­…èˆéŸ³ä¹é…’é¦†", "time": "14:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/gDsWLdrgaL4"}, {"city": "æ­å·", "name": "å¯Œé˜³ç¾¤ä¼—èˆå…", "time": "18:00-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/8wieCeN1d4hX"}, {"city": "æ¸©å·", "name": "æµªèŠ±æ­Œèˆ", "time": "13:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/UwZPY97gxW"}, {"city": "æ¸©å·", "name": "é¾™æ¹¾æµªèŠ±", "time": "åˆåœº: 12:00-17:30\næ™šåœº: 18:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/hqXo2j31n6pP"}, {"city": "ä¸½æ°´", "name": "è“å‚²", "time": "19:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/fs8q8jnIf0W"}, {"city": "ä¹‰ä¹Œ", "name": "è¿ªè¿ªkèˆ", "time": "19:30-02:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/bv5l6DYwc6s"}, {"city": "ä¹‰ä¹Œ", "name": "ä¸½èbar", "time": "19:30-03:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/bvLW0kSybd2"}, {"city": "è¡¢å·", "name": "æ‘‡ä¸€æ‘‡", "time": "20:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/11ErgIUpl0MT"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "é€é¥éŸ³ä¹å§", "time": "16:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/38Z0Y4wB1pebJ"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "é‚‚é€…", "time": "19:00-03:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/1HpkeQpTu9Te"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "æ–°æ­£èèˆé…’å§", "time": "17:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/hiwZ3Lf1e4as"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "è“å ¡é…’å§èˆå…", "time": "18:30-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/TYlZZPc70s"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "èŠ³åéŸ³ä¹é…’å§", "time": "19:00-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/U2KBF31h54l"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "æ‚¦è‰²é…’å§", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/bxqeWyWx3SG"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "é£æ‚¦èˆå…", "time": "18:00-05:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/hbA4wa91Bd28"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "æ˜¥é£åé‡ŒéŸ³ä¹é…’å§", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/hdGQfFb1nauo"}, {"city": "ç»å…´æŸ¯æ¡¥", "name": "è“æ¢¦æ­Œèˆå…", "time": "18:30-01:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/h7Oy9trr75w"}, {"city": "å°å·", "name": "å¤œæ±Ÿæ¥ èˆå…", "time": "åˆåœº: 13:00-16:30 \næ™šåœº: 19:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/hniTCUt1i5pD"}, {"city": "å®æ³¢", "name": "ä¹8é‡è´©KTV", "time": "åˆåœº: 12:00-16:30 \næ™šåœº: 18:30-23:30", "dragon": false, "hot": true, "link": "https://surl.amap.com/gfd5zDz1m9v7"}, {"city": "å®æ³¢", "name": "æ–°èŠ‚å¥æ—¶å°šé‡è´©KTV", "time": "åˆåœº: 12:00-17:00\næ™šåœº: 18:30-23:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/1nk3kliX44F"}, {"city": "å®æ³¢", "name": "ä¸°æˆå¨±ä¹", "time": "13:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/ghWabAR167ut"}, {"city": "å®æ³¢", "name": "åº·éƒ½èˆå…", "time": "åˆåœº: 12:00-16:00\næ™šåœº: 18:30-23:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/sSD7f7P12eNh"}, {"city": "å®æ³¢", "name": "å¤©æ½®å¨±ä¹", "time": "åˆåœº: 13:00-17:30\næ™šåœº: 18:30-01:00", "dragon": false, "hot": true, "link": "https://surl.amap.com/fJ0xzAuM9af"}, {"city": "å®æ³¢", "name": "ä¸½èèˆå…", "time": "åˆåœº: 12:30-17:00\næ™šåœº: 18:00-00:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/h5TXLDkgcpD"}, {"city": "å—äº¬", "name": "ç›¸é€¢", "time": "13:00-02:00", "dragon": true, "hot": true, "link": "ttps://surl.amap.com/2FiPCSop14gVn"}, {"city": "å—äº¬", "name": "å¤©æ¶¯", "time": "10:00-02:00", "dragon": true, "hot": true, "link": "https://surl.amap.com/fGKCYpc1AejP"}, {"city": "å—äº¬", "name": "M9éŸ³ä¹å§", "time": "19:00-02:00", "dragon": true, "hot": false, "link": "https://surl.amap.com/pW3hPgN153tc"}, {"city": "å—äº¬", "name": "æ¸…æ‚¦", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/1Bzsh981hcIo"}, {"city": "å—äº¬", "name": "åŠé†º", "time": "19:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/q6P7MSVz9Z4"}, {"city": "å—äº¬", "name": "æ•£æ€€", "time": "13:00-02:00", "dragon": false, "hot": false, "link": "https://surl.amap.com/uhZ8Os580RJ"}];
const cityGroups = {"S": ["ä¸Šæµ·", "è‹å·"], "#": ["ä¸¹é˜³", "ä¹‰ä¹Œ", "å¥å®¹", "å®œå…´", "æ¡ä¹¡", "æ±Ÿé˜´", "æµ·ç›", "ç»å…´æŸ¯æ¡¥"], "L": ["ä¸½æ°´"], "N": ["å—äº¬", "å—é€š", "å®æ³¢"], "T": ["å°å·", "æ³°å·"], "J": ["å˜‰å…´"], "Y": ["æ‰¬å·", "ç›åŸ"], "H": ["æ­å·"], "W": ["æ¸©å·"], "Q": ["è¡¢å·"], "Z": ["é•‡æ±Ÿ"]};
const hotCities = ["å®æ³¢", "æ‰¬å·", "å˜‰å…´", "å°å·", "ä¹‰ä¹Œ", "æ­å·", "ä¸½æ°´", "è¡¢å·", "å—äº¬"];
const letters = ["H", "J", "L", "N", "Q", "S", "T", "W", "Y", "Z", "#"];

let currentCity = (records.length ? records[0].city : "å…¨éƒ¨"); // default like screenshot (top-left city)
const listEl = document.getElementById("list");
const qEl = document.getElementById("q");
const cityLabel = document.getElementById("cityLabel");

const cityModal = document.getElementById("cityModal");
const openCity = document.getElementById("openCity");
const closeCity = document.getElementById("closeCity");
const hotGrid = document.getElementById("hotGrid");
const cityList = document.getElementById("cityList");
const cityQ = document.getElementById("cityQ");
const indexBar = document.getElementById("indexBar");

function titleWithEmoji(r){{
  let t = r.name;
  if (r.dragon) t += " ğŸ‰";
  if (r.hot) t += " ğŸ”¥";
  return t;
}}

function matchKw(r, kw){{
  if(!kw) return true;
  return r.city.includes(kw) || r.name.includes(kw);
}}

function renderList(){{
  const kw = qEl.value.trim();
  const filtered = records.filter(r => (currentCity==="å…¨éƒ¨" || r.city===currentCity) && matchKw(r, kw));

  listEl.innerHTML = "";
  if(filtered.length===0){{
    listEl.innerHTML = '<div class="empty">æ²¡æœ‰åŒ¹é…çš„èˆå…</div>';
    return;
  }}

  filtered.forEach(r => {{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="cardtop">
        <div class="title">${titleWithEmoji(r)}</div>
        <div class="badge">è¥ä¸šä¸­</div>
      </div>
      <div class="line"><span class="dot"></span><span>è¥ä¸šæ—¶é—´: ${r.time}</span></div>
      <div class="line" style="margin-top:6px;"><span class="dot" style="opacity:.25"></span><span>${r.city}</span></div>
      <div class="navrow">
        <a class="navbtn" href="${r.link}" target="_blank" rel="noopener">âœˆ å¯¼èˆª</a>
      </div>
    `;
    listEl.appendChild(card);
  }});
}}

function openCityModal(){{
  cityModal.classList.add("show");
  cityModal.setAttribute("aria-hidden","false");
  indexBar.style.display = "flex";
  cityQ.value = "";
  renderCityList("");
  document.body.style.overflow = "hidden";
}}
function closeCityModal(){{
  cityModal.classList.remove("show");
  cityModal.setAttribute("aria-hidden","true");
  indexBar.style.display = "none";
  document.body.style.overflow = "";
}}
function setCity(c){{
  currentCity = c;
  cityLabel.textContent = c;
  closeCityModal();
  renderList(); // auto refresh on city change
}}

function renderHot(){{
  hotGrid.innerHTML = "";
  hotCities.forEach(c => {{
    const d = document.createElement("div");
    d.className = "hotitem";
    d.textContent = c;
    d.onclick = () => setCity(c);
    hotGrid.appendChild(d);
  }});
}}

function buildIndex(){{
  indexBar.innerHTML = "";
  letters.forEach(L => {{
    const s = document.createElement("span");
    s.textContent = L;
    s.onclick = () => {{
      const el = document.getElementById("sec_"+L);
      if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
    }};
    indexBar.appendChild(s);
  }});
}}

function renderCityList(keyword){{
  const kw = keyword.trim();
  cityList.innerHTML = "";

  letters.forEach(L => {{
    const arr = (cityGroups[L] || []).filter(c => !kw || c.includes(kw));
    if(arr.length===0) return;

    const h = document.createElement("div");
    h.className = "grouphead";
    h.id = "sec_"+L;
    h.textContent = L;
    cityList.appendChild(h);

    arr.forEach(c => {{
      const it = document.createElement("div");
      it.className = "cityitem";
      it.textContent = c;
      it.onclick = () => setCity(c);
      cityList.appendChild(it);
    }});
  }});

  if(cityList.children.length===0){{
    cityList.innerHTML = '<div class="empty">æ²¡æœ‰åŒ¹é…çš„åŸå¸‚</div>';
  }}
}}

openCity.onclick = openCityModal;
closeCity.onclick = closeCityModal;
cityModal.addEventListener("click", (e) => {{ if(e.target===cityModal) closeCityModal(); }});

qEl.addEventListener("input", renderList);
cityQ.addEventListener("input", () => renderCityList(cityQ.value));

// initial
cityLabel.textContent = currentCity;
renderHot();
buildIndex();
renderList();
</script>
</body>
</html>
